<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Max Ariani Portfolio</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
    }

    /* NAV */
    nav {
      position: sticky;
      top: 0;
      width: 100%;
      background: #000;
      padding: 1rem;
      display: flex;
      justify-content: center;
      gap: 2rem;
      border-bottom: 1px solid #333;
      z-index: 1000;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
      cursor: pointer;
    }
    nav a:hover { color: #0af; }

    /* SECCIONES */
    .section {
      display: none;
      padding: 3rem 2rem 6rem;
      max-width: 1000px;
      margin: auto;
    }
    .active { display:block; }

    /* MINIATURAS */
    .thumbs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .thumb { cursor:pointer; border:2px solid #222; border-radius:10px; overflow:hidden; transition:0.2s; }
    .thumb:hover { transform:scale(1.05); border-color:#0af; }
    .thumb img { width:100%; display:block; }

    /* VISOR 3D */
    #viewer3d {
      width:100%;
      height:500px;
      background:#000;
      border-radius:10px;
      margin-bottom:1rem;
      position:relative;
    }

    /* LOADING SPINNER */
    #loadingSpinner {
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%, -50%);
      width:60px; height:60px;
      border:6px solid #333;
      border-top:6px solid #0af;
      border-radius:50%;
      animation:spin 0.9s linear infinite;
      display:none;
    }
    @keyframes spin {
      to { transform:translate(-50%, -50%) rotate(360deg); }
    }

    /* BOTONES DE LUZ */
    #lightButtons {
      margin-bottom:1rem;
      display:flex;
      gap:10px;
      justify-content:center;
    }
    .light-btn {
      padding:8px 14px;
      background:#222;
      border:1px solid #444;
      cursor:pointer;
      border-radius:5px;
      color:#ddd;
    }
    .light-btn:hover { background:#0af; color:#000; }

    /* FOOTER */
    footer {
      position:fixed;
      bottom:0;
      width:100%;
      background:#000;
      padding:1rem;
      text-align:center;
      border-top:1px solid #333;
    }
    .social-icons {
      display:flex;
      justify-content:center;
      gap:1.2rem;
      margin-top:0.3rem;
      font-size:1.6rem;
    }
    
/* ----------- GALERÍA 2D CON THUMBNAILS ----------- */

.main-image-container {
  width: 100%;
  max-width: 900px;
  height: 500px;
  margin: auto;
  overflow: hidden;
  border-radius: 10px;
  border: 2px solid #222;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
}

.main-image-container img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.thumb-strip {
  margin-top: 1rem;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
}

.thumb2d {
  width: 120px;
  height: 80px;
  object-fit: cover; /* recorta sin deformar */
  border: 2px solid #444;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s;
}

.thumb2d:hover {
  transform: scale(1.08);
  border-color: #0af;
}

    
.carousel {
  position: relative;
  width: 100%;
  max-width: 900px;
  margin: auto;
  overflow: hidden;
  border-radius: 10px;
  border: 2px solid #222;
}

.carousel-track {
  display: flex;
  transition: transform 0.5s ease;
}

.carousel-track img {
  width: 100%;
  flex-shrink: 0;
  border-right: 2px solid #000;
  user-select: none;
}

.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.6);
  border: none;
  padding: 12px 18px;
  color: white;
  font-size: 2rem;
  cursor: pointer;
  z-index: 10;
  border-radius: 6px;
}

.carousel-btn:hover {
  background: #0af;
  color: #000;
}

.carousel-btn.prev { left: 10px; }
.carousel-btn.next { right: 10px; }
/* ----------- GALERÍA DE ANIMACIÓN (VIDEO) ----------- */

.main-video-container {
  width: 100%;
  max-width: 900px;
  height: 500px;
  margin: auto;
  overflow: hidden;
  border-radius: 10px;
  border: 2px solid #222;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
}

.main-video-container video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: #000;
}

.thumbAnim {
  width: 120px;
  height: 80px;
  object-fit: cover;
  border: 2px solid #444;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s;
}

.thumbAnim:hover {
  transform: scale(1.08);
  border-color: #0af;
}

    
  </style>
</head>

<body>

<!-- NAV -->
<nav>
  <a onclick="showSection('home')">Home</a>
  <a onclick="showSection('2d')">2D</a>
  <a onclick="showSection('3d')">3D</a>
  <a onclick="showSection('animacion')">Animación</a>
  <a onclick="showSection('tech')">Tech Art</a>
</nav>

<!-- HOME -->
<section id="home" class="section active">
  <div class="hero" style="text-align: center;">
    <img src="portada.jpg" alt="Portada" style="width:100%; max-width:700px; border-radius:10px;">
    <h1>Max Ariani Portfolio</h1>
    <p>Artista 2D/3D — Modelado, Animación y Tech Art.</p>
   </div>
   <div class="hero" style="text-align: center;">
  <img src="perfil.png" alt="Perfil"  style="float:left;width:70%; max-width:256px; border-radius:10px;">
    <p style="text-align: left;padding-left: 10px;">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
  </div>
</section>
<!-- ANIMACIÓN -->
<section id="animacion" class="section">
  <h2>Animación</h2>

  <!-- VIDEO PRINCIPAL -->
  <div class="main-video-container">
    <video id="mainVideo" controls>
      <source src="assets/anim/video1.mp4" type="video/mp4">
    </video>
  </div>

  <!-- THUMBNAILS DE VIDEO -->
  <div class="thumb-strip">
    <img class="thumbAnim" src="assets/anim/thumb1.jpg" onclick="setMainVideo('assets/anim/video1.mp4')">
    <img class="thumbAnim" src="assets/anim/thumb2.jpg" onclick="setMainVideo('assets/anim/video2.mp4')">
    <img class="thumbAnim" src="assets/anim/thumb3.jpg" onclick="setMainVideo('assets/anim/video3.mp4')">
    <img class="thumbAnim" src="assets/anim/thumb4.jpg" onclick="setMainVideo('assets/anim/video4.mp4')">
  </div>
</section>

<!-- 2D -->
<section id="2d" class="section">
  <h2>Galería 2D</h2>

  <!-- Imagen principal -->
  <div class="main-image-container">
    <img id="mainImage" src="assets/2d/img1.png">
  </div>

  <!-- Thumbnails -->
  <div class="thumb-strip">
    <img class="thumb2d" src="assets/2d/img1.png" onclick="setMainImage('assets/2d/img1.png')">
    <img class="thumb2d" src="assets/2d/img2.png" onclick="setMainImage('assets/2d/img2.png')">
    <img class="thumb2d" src="assets/2d/img3.png" onclick="setMainImage('assets/2d/img3.png')">
    <img class="thumb2d" src="assets/2d/img4.png" onclick="setMainImage('assets/2d/img4.png')">
  </div>
</section>


  
<!-- 3D -->
<section id="3d" class="section">
  <h2>Modelos 3D</h2>

  <!-- MINIATURAS -->
  <div class="thumbs">
    <div class="thumb" onclick="loadModel('assets/models/compressed_Bull_Char_blended.glb')">
      <img src="assets/thumbnails/bull.jpg">
    </div>

    <div class="thumb" onclick="loadModel('assets/models/mech_tank_biped.glb')">
      <img src="assets/thumbnails/mechtank.jpg">
    </div>

    <div class="thumb" onclick="loadModel('assets/models/solid_snake_low_poly_8_bit.glb')">
      <img src="assets/thumbnails/solidsnake8bit.jpg">
    </div>

      <div class="thumb" onclick="loadModel('assets/models/solid_snake_low_poly_8_bit.glb')">
      <img src="assets/thumbnails/solidsnake8bit.jpg">
    </div>
  </div>

  <!-- PANEL DE LUZ -->
  <div id="lightButtons">
    <button class="light-btn" onclick="setLightMode('studio')">Studio</button>
    <button class="light-btn" onclick="setLightMode('warm')">Warm</button>
    <button class="light-btn" onclick="setLightMode('cool')">Cool</button>
  </div>

  <!-- VISOR -->
  <div id="viewer3d">
    <div id="loadingSpinner"></div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <p style="font-weight:bold;">Contact</p>
  <div class="social-icons">
    <a href="#"><i class="fab fa-instagram"></i></a>
    <a href="#"><i class="fab fa-artstation"></i></a>
    <a href="#"><i class="fas fa-envelope"></i></a>
  </div>
</footer>

<!-- THREE JS -->
<script type="module">
import * as THREE from "https://esm.run/three";
import { OrbitControls } from "https://esm.run/three/examples/jsm/controls/OrbitControls";
import { GLTFLoader } from "https://esm.run/three/examples/jsm/loaders/GLTFLoader";
import { DRACOLoader } from "https://esm.run/three/examples/jsm/loaders/DRACOLoader";
import { RGBELoader } from "https://esm.run/three/examples/jsm/loaders/RGBELoader";

let scene, camera, renderer, controls;
let gltfLoader, dracoLoader;
let currentModel = null;
let mixer = null;
let clock = new THREE.Clock();

// luces
let hemi, dir;

// HDRI
let envMap = null;

const container = document.getElementById("viewer3d");
const spinner = document.getElementById("loadingSpinner");

function initViewer() {
  if (scene) return;

  scene = new THREE.Scene();

  camera = new THREE.PerspectiveCamera(50, container.clientWidth / container.clientHeight, 0.1, 200);
  camera.position.set(0,1.5,3);

  renderer = new THREE.WebGLRenderer({ antialias:true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.outputColorSpace = THREE.SRGBColorSpace;
  container.appendChild(renderer.domElement);

  controls = new OrbitControls(camera, renderer.domElement);

  // --- HDRI ---
  new RGBELoader()
    .setPath("assets/hdri/")
    .load("studio_small_08_1k.hdr", (hdr)=>{
      let pmrem = new THREE.PMREMGenerator(renderer);
      envMap = pmrem.fromEquirectangular(hdr).texture;
      scene.environment = envMap;
    });

  // luces por defecto
  hemi = new THREE.HemisphereLight(0xffffff, 0x444444, 1);
  dir = new THREE.DirectionalLight(0xffffff, 1);
  dir.position.set(5,10,7);
  scene.add(hemi, dir);

  // loaders
  dracoLoader = new DRACOLoader().setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");
  gltfLoader = new GLTFLoader();
  gltfLoader.setDRACOLoader(dracoLoader);

  animate();
}

function animate() {
  requestAnimationFrame(animate);
  let delta = clock.getDelta();
  if (mixer) mixer.update(delta);
  renderer.render(scene, camera);
  
}

window.loadModel = (path)=>{
  initViewer();
  spinner.style.display = "block";

  if (currentModel) {
    scene.remove(currentModel);
    currentModel = null;
  }

  gltfLoader.load(path, (gltf)=>{

    spinner.style.display = "none";
    currentModel = gltf.scene;

    // Animaciones →
    mixer = gltf.animations.length > 0 ? new THREE.AnimationMixer(gltf.scene) : null;
    if (mixer) mixer.clipAction(gltf.animations[0]).play();

    // Normalizar escala
    const box = new THREE.Box3().setFromObject(currentModel);
    const size = box.getSize(new THREE.Vector3());
    const scale = 1.6 / Math.max(size.x, size.y, size.z);
    currentModel.scale.setScalar(scale);
    box.setFromObject(currentModel);
    const center = box.getCenter(new THREE.Vector3());
    currentModel.position.sub(center);

    scene.add(currentModel);
  });
};

window.setLightMode = (mode)=>{
  switch(mode){
    case "studio":
      hemi.intensity = 1;
      hemi.color.set(0xffffff);
      dir.intensity = 1;
      dir.color.set(0xffffff);
      break;

    case "warm":
      hemi.color.set(0xffbb66);
      dir.color.set(0xffaa55);
      break;

    case "cool":
      hemi.color.set(0x99bbff);
      dir.color.set(0x88aaff);
      break;
  }
};

window.showSection = (id)=>{
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  window.scrollTo(0,0);
  if (id === "3d") setTimeout(()=>initViewer(), 100);
};
  // Cargar automáticamente el primer modelo al entrar en la sección 3D por primera vez
let firstModelLoaded = false;

const originalShowSection = window.showSection;
window.showSection = (id) => {
  originalShowSection(id);

  if (id === "3d" && !firstModelLoaded) {
    firstModelLoaded = true;

    // Iniciar visor si aún no se creó
    initViewer();

    // Cargar el primer modelo
    loadModel("assets/models/compressed_Bull_Char_blended.glb");
  }
};
// carrusel 2d
  /* --- CARRUSEL 2D --- */
let currentSlide = 0;
let totalSlides = 4; // cambiá según cuántas imágenes tengas

window.updateCarousel = ()=>{
  const track = document.querySelector(".carousel-track");
  const width = document.querySelector(".carousel").clientWidth;
  track.style.transform = `translateX(${-currentSlide * width}px)`;
};

window.nextSlide = ()=>{
  currentSlide = (currentSlide + 1) % totalSlides;
  updateCarousel();
};

window.prevSlide = ()=>{
  currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
  updateCarousel();
};

window.addEventListener("resize", updateCarousel);
/* --- CAMBIAR IMAGEN PRINCIPAL EN 2D --- */
window.setMainImage = (path)=>{
  document.getElementById("mainImage").src = path;
};
  
/* --- CAMBIAR VIDEO PRINCIPAL EN ANIMACIÓN --- */
window.setMainVideo = (path)=>{
  const vid = document.getElementById("mainVideo");
  vid.src = path;
  vid.play();
};

</script>

</body>
</html>
