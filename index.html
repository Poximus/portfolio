<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio - ArtStation style (Template)</title>
  <style>
    :root{--bg:#0f0f10;--card:#151516;--accent:#7c5cff;--muted:#9aa0a6;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#e6e6e6;background:linear-gradient(180deg,#070708 0%,#0f0f10 100%)}
    .container{max-width:1200px;margin:32px auto;padding:24px}
    header{display:flex;align-items:center;gap:20px;margin-bottom:18px}
    .logo{font-weight:700;font-size:20px;color:var(--accent)}
    nav{margin-left:auto;display:flex;gap:12px}
    nav button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer}
    .hero{display:flex;gap:24px;margin-bottom:24px}
    .left{flex:1}
    .right{width:420px;background:var(--card);padding:16px;border-radius:12px;box-shadow:0 4px 30px rgba(0,0,0,0.6)}

    /* gallery grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
    .thumb{background:var(--glass);border-radius:8px;overflow:hidden;cursor:pointer;position:relative;height:140px}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .35s}
    .thumb:hover img{transform:scale(1.05)}

    /* video gallery */
    .video-thumb{height:110px;display:flex;align-items:center;justify-content:center;background:#111;border-radius:8px;position:relative}
    .video-thumb video{width:100%;height:100%;object-fit:cover}
    .meta{font-size:13px;color:var(--muted);margin-top:8px}

    /* 3d viewer */
    #viewer{width:100%;height:360px;background:#0b0b0c;border-radius:10px;overflow:hidden}
    .viewer-controls{display:flex;gap:8px;margin-top:10px}
    .btn{background:var(--accent);border:none;padding:8px 10px;border-radius:8px;color:white;cursor:pointer}
    input[type=file]{display:none}

    /* modal lightbox */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:40}
    .modal.show{display:flex}
    .modal .inner{max-width:1100px;width:96%;max-height:90%;background:#0f0f10;padding:12px;border-radius:10px}
    .modal img, .modal video{width:100%;height:auto;display:block}

    footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}

    /* responsive */
    @media(max-width:900px){.hero{flex-direction:column}.right{width:100%}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">TuNombre • Portfolio</div>
      <div class="profile">Artista 3D — Modelado • Texturas • Rig</div>
      <nav>
        <button data-show="images">Imágenes</button>
        <button data-show="models">Modelos 3D</button>
        <button data-show="videos">Videos</button>
        <button onclick="downloadZip()">Descargar</button>
      </nav>
    </header>

    <section class="hero">
      <div class="left">
        <h2>Galería de imágenes</h2>
        <div id="images" class="grid"></div>

        <h2 style="margin-top:20px">Videos</h2>
        <div id="videos" class="grid"></div>
      </div>

      <aside class="right">
        <h3>Visualizador 3D</h3>
        <div id="viewer"></div>
        <div class="viewer-controls">
          <label class="btn">Cargar GLB/GLTF<input id="fileModel" type="file" accept=".glb,.gltf"/></label>
          <button class="btn" id="resetCam">Reset Cámara</button>
          <button class="btn" id="loadSample">Modelo demo</button>
        </div>

        <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.04)">
        <div class="meta">Arrastra imágenes o haz clic en las miniaturas para verlas en grande. En videos, haz clic para abrir el modal.</div>
      </aside>
    </section>

    <footer>Plantilla generada — reemplaza imágenes, modelos y videos por los tuyos. Hecha para desplegar en GitHub Pages o localmente.</footer>
  </div>

  <!-- lightbox/modal -->
  <div id="modal" class="modal" onclick="closeModal(event)">
    <div class="inner" onclick="event.stopPropagation()">
      <div id="modalContent"></div>
    </div>
  </div>

  <script type="module">
    // THREE.js imports (module support)
    import * as THREE from 'https://unpkg.com/three@0.152.2/build/three.module.js';
    import { OrbitControls } from 'https://unpkg.com/three@0.152.2/examples/jsm/controls/OrbitControls.js';
    import { GLTFLoader } from 'https://unpkg.com/three@0.152.2/examples/jsm/loaders/GLTFLoader.js';

    // Simple in-memory gallery data (replace with your own or generate dynamically)
    const sampleImages = [
      'https://images.unsplash.com/photo-1612831208989-9b6f64c0a1d0?w=1200&q=80',
      'https://images.unsplash.com/photo-1564767609342-620cb19b2357?w=1200&q=80',
      'https://images.unsplash.com/photo-1549887534-149b6b6a2d7a?w=1200&q=80',
      'https://images.unsplash.com/photo-1508921912186-1d1a45ebb3c1?w=1200&q=80',
      'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=1200&q=80',
      'https://images.unsplash.com/photo-1518770660439-4636190af475?w=1200&q=80'
    ];
    const sampleVideos = [
      {thumb:'https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'},
      {thumb:'https://media.w3.org/2010/05/sintel/poster.png', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'}
    ];

    // build galleries
    const imagesEl = document.getElementById('images');
    sampleImages.forEach(src=>{
      const t = document.createElement('div'); t.className='thumb';
      const img = document.createElement('img'); img.src = src; img.alt='Artwork';
      t.appendChild(img);
      t.addEventListener('click',()=>openModal('<img src="'+src+'" alt="image"/>'));
      imagesEl.appendChild(t);
    });

    const videosEl = document.getElementById('videos');
    sampleVideos.forEach(v=>{
      const t = document.createElement('div'); t.className='video-thumb';
      const vid = document.createElement('video'); vid.src = v.src; vid.muted=true; vid.loop=true; vid.playsInline=true; vid.autoplay=true;
      vid.addEventListener('loadeddata',()=>{});
      t.appendChild(vid);
      t.addEventListener('click',()=>openModal('<video controls src="'+v.src+'"></video>'));
      videosEl.appendChild(t);
    });

    function openModal(html){
      document.getElementById('modalContent').innerHTML = html;
      document.getElementById('modal').classList.add('show');
    }
    function closeModal(e){ document.getElementById('modal').classList.remove('show'); }

    // simple 3D viewer setup
    const canvasContainer = document.getElementById('viewer');
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x080808);
    const camera = new THREE.PerspectiveCamera(50, canvasContainer.clientWidth / canvasContainer.clientHeight, 0.1, 2000);
    camera.position.set(0,1.3,3);
    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setPixelRatio(window.devicePixelRatio); renderer.setSize(canvasContainer.clientWidth, canvasContainer.clientHeight);
    canvasContainer.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.target.set(0,1,0); controls.update();

    const hemi = new THREE.HemisphereLight(0xffffff,0x444444,0.7); scene.add(hemi);
    const dir = new THREE.DirectionalLight(0xffffff,0.8); dir.position.set(5,10,7); scene.add(dir);

    // ground grid + helper
    const grid = new THREE.GridHelper(6,12,'#111','#0a0a0a'); grid.position.y = 0; scene.add(grid);

    // placeholder
    let currentModel = null;
    const loader = new GLTFLoader();

    document.getElementById('fileModel').addEventListener('change', (ev)=>{
      const file = ev.target.files[0]; if(!file) return;
      const url = URL.createObjectURL(file);
      loadModel(url);
    });

    document.getElementById('loadSample').addEventListener('click', ()=>{
      // sample small glb — if you host locally replace URL or use your own
      loadModel('https://threejs.org/examples/models/gltf/Duck/glTF-Binary/Duck.glb');
    });

    document.getElementById('resetCam').addEventListener('click', ()=>{
      camera.position.set(0,1.3,3); controls.target.set(0,1,0); controls.update();
    });

    function loadModel(url){
      loader.load(url, (gltf)=>{
        if(currentModel){ scene.remove(currentModel); disposeModel(currentModel); }
        currentModel = gltf.scene || gltf.scenes[0];
        currentModel.position.set(0,0,0);
        // auto-scale
        const box = new THREE.Box3().setFromObject(currentModel);
        const size = box.getSize(new THREE.Vector3());
        const maxDim = Math.max(size.x,size.y,size.z);
        if(maxDim>0) currentModel.scale.multiplyScalar(1.5 / maxDim);
        scene.add(currentModel);
      }, undefined, (e)=>{ console.error('Error loading model', e); alert('Error al cargar el modelo. Revisa la consola.'); });
    }

    function disposeModel(obj){ obj.traverse(o=>{ if(o.geometry) o.geometry.dispose(); if(o.material){ if(Array.isArray(o.material)){ o.material.forEach(m=>m.dispose()); } else o.material.dispose(); } }); }

    // render loop
    function animate(){ requestAnimationFrame(animate); renderer.render(scene,camera); }
    animate();

    // resize handling
    new ResizeObserver(()=>{
      const w = canvasContainer.clientWidth, h = canvasContainer.clientHeight;
      camera.aspect = w/h; camera.updateProjectionMatrix(); renderer.setSize(w,h);
    }).observe(canvasContainer);

    // simple download stub (can be expanded to generate zip)
    function downloadZip(){
      alert('Este botón es un placeholder. Sube tus archivos y usa el botón derecho -> Guardar como o sube a GitHub.');
    }
    window.downloadZip = downloadZip;

    // navigation buttons
    document.querySelectorAll('nav button[data-show]').forEach(b=>b.addEventListener('click', ()=>{
      const target = b.getAttribute('data-show');
      if(target==='images'){ window.scrollTo({top:document.getElementById('images').offsetTop - 20, behavior:'smooth'}); }
      if(target==='models'){ window.scrollTo({top:document.getElementById('viewer').offsetTop - 20, behavior:'smooth'}); }
      if(target==='videos'){ window.scrollTo({top:document.getElementById('videos').offsetTop - 20, behavior:'smooth'}); }
    }));

  </script>
</body>
</html>
